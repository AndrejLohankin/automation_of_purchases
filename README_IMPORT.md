# Импорт данных магазина через админку

## Быстрый запуск:

1. **Активация виртуального окружения:**
```bash
venv\Scripts\activate
```

2. **Установка зависимостей:**
```bash
pip install -r requirements.txt
```

3. **Миграции:**
```bash
python manage.py makemigrations
python manage.py migrate
```

4. **Создание суперпользователя:**
```bash
python manage.py createsuperuser
```

5. **Запуск сервера:**
```bash
python manage.py runserver
```

6. **Импорт данных (через терминал):**
```bash
python manage.py load_db ../data/shop1.yaml
```

## Использование админки:

1. **Перейдите по адресу:** `http://127.0.0.1:8000/admin/`

2. **Войдите под учетной записью администратора**

3. **В главном меню найдите пункт "Импорт данных"**

4. **Нажмите "Импорт данных" для открытия формы**

5. **Загрузите YAML-файл с данными магазина**

6. **Нажмите "Импортировать" для загрузки данных**

## Доступные файлы для импорта:

- `data/shop1.yaml` - Связной (смартфоны, аксессуары, телевизоры)
- `data/shop2.yaml` - M.Video (ноутбуки, планшеты, мониторы)
- `data/shop3.yaml` - Эльдорадо (бытовая техника)

## Структура YAML-файла:

```yaml
shop: Название магазина
categories:
  - id: №категории
    name: Название категории
goods:
  - id: №товара
    category: №категории
    model: Модель товара
    name: Название товара
    price: Цена
    price_rrc: Рекомендуемая цена
    quantity: Количество
    parameters:
      Название параметра: Значение
```

## Пример использования:

1. **Загрузка данных Связного:**
   - Выберите файл `data/shop1.yaml`
   - Нажмите "Импортировать"
   - Дождитесь сообщения об успешном импорте

2. **Загрузка данных M.Video:**
   - Выберите файл `data/shop2.yaml`
   - Нажмите "Импортировать"
   - Дождитесь сообщения об успешном импорте

## Что происходит при импорте:

- **Создается/обновляется магазин** с указанным названием
- **Обрабатываются категории** товаров
- **Загружаются товары** с параметрами
- **Старые данные для магазина удаляются**
- **Показывается сообщение об успешном импорте**

## Ошибки и решения:

1. **Ошибка: "Файл должен иметь расширение .yaml"**
   - Решение: Проверьте расширение файла

2. **Ошибка: "Некорректный формат YAML-файла"**
   - Решение: Проверьте структуру YAML файла

3. **Ошибка: "Ошибка при импорте данных"**
   - Решение: Проверьте корректность данных в файле

## Важные моменты:

- **Один файл = один магазин**
- **Данные заменяют существующие** для этого магазина
- **Поддерживаются только файлы .yaml**
- **Кодировка файла должна быть UTF-8**

