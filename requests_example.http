# requests_example.http

### --- Конфигурация ---
@baseUrl = http://127.0.0.1:8000/api/v1
# Для сессионной аутентификации сохраняем куки в файл
@cookie_jar = ./cookies.txt

### --- Регистрация ---
# POST /api/v1/register/
POST {{baseUrl}}/register/
Content-Type: application/json

{
    "first_name": "Test5",
    "last_name": "User5",
    "email": "testuser@example5.com",
    "password": "securepassword1235"
}

### --- Вход ---
# POST /api/v1/login/
# Использует куки для аутентификации в последующих запросах
POST {{baseUrl}}/login/
Content-Type: application/json

{
    "email": "testuser@example5.com",
    "password": "securepassword1235"
}

### --- Вход ---
# POST /api/v1/login/
# Использует куки для аутентификации в последующих запросах
POST {{baseUrl}}/login/
Content-Type: application/json

{
    "email": "2@mail.ru",
    "password": "brigbrig"
}

### --- Список товаров ---
# GET /api/v1/products/
GET {{baseUrl}}/products/
Accept: application/json

### --- Спецификация товара ---
# GET /api/v1/products/{product_info_id}/
# Получает спецификацию товара
GET {{baseUrl}}/products/6/
Accept: application/json

### --- Фильтрация списка товаров ---
# GET /api/v1/products/?search=название_товара
GET {{baseUrl}}/products/?search=Смартфон
Accept: application/json

### --- Добавление товара в корзину ---
# POST /api/v1/basket/
# Замените product_info_id на реальный ID товара из ответа GET /products/
POST {{baseUrl}}/basket/
Content-Type: application/json
# Куки автоматически подставляются из cookie_jar

{
    "product_info_id": 6,
    "quantity": 2
}

### --- Просмотр корзины ---
# GET /api/v1/basket/
GET {{baseUrl}}/basket/
Accept: application/json

### --- Удаление товара из корзины ---
# DELETE /api/v1/cart/delete/
# Удаляет товар из корзины по ID
DELETE {{baseUrl}}/cart/delete/?order_item_id=12
# Куки автоматически подставляются из cookie_jar

### --- Удаление нескольких товаров из корзины ---
# POST /api/v1/cart/delete-batch/
# Удаляет несколько товаров из корзины одновременно
POST {{baseUrl}}/cart/delete-batch/
Content-Type: application/json
# Куки автоматически подставляются из cookie_jar

{
    "order_item_ids": [13, 14]
}

### --- Очистка всей корзины ---
# DELETE /api/v1/cart/clear/
# Удаляет все товары из корзины
DELETE {{baseUrl}}/cart/clear/
# Куки автоматически подставляются из cookie_jar

### --- Добавление контакта ---
# POST /api/v1/contacts/
# Добавляет контакт текущему аутентифицированному пользователю
POST {{baseUrl}}/contacts/
Content-Type: application/json

{
    "city": "Moscow",
    "street": "Kolomenskay",
    "house": "3",
    "phone": "+71234567890"
}

### --- Удаление контакта ---
# DELETE /api/v1/contacts/delete/
# Удаляет контакт по ID
DELETE {{baseUrl}}/contacts/delete/?contact_id=2
# Куки автоматически подставляются из cookie_jar

### --- Детальный просмотр контактов ---
# GET /api/v1/contacts/detailed/
# Получает детальный список контактов с фильтрацией
GET {{baseUrl}}/contacts/detailed/
Accept: application/json

### --- Просмотр конкретного контакта ---
# GET /api/v1/contacts/{contact_id}/
# Получает детальную информацию о конкретном контакте
GET {{baseUrl}}/contacts/36/
Accept: application/json

### --- Подтверждение заказа ---
# POST /api/v1/orders/confirm/
# Замените basket_id и contact_id на реальные ID
# basket_id - это ID заказа со статусом 'basket'
# contact_id - это ID контакта, добавленного пользователем
POST {{baseUrl}}/orders/confirm/
Content-Type: application/json

{
    "basket_id": 13,
    "contact_id": 36
}

### --- История заказов ---
# GET /api/v1/orders/history/
GET {{baseUrl}}/orders/history/
Accept: application/json

### --- Детали заказа ---
# GET /api/v1/orders/{order_id}/
# Получает детальную информацию о заказе
GET {{baseUrl}}/orders/6/
Accept: application/json


### --- Редактирование статуса заказа ---
# PUT /api/v1/orders/{order_id}/status/
# Изменяет статус заказа (только для администраторов)
PUT {{baseUrl}}/orders/6/status/
Content-Type: application/json

{
    "state": "delivered"
}

### Доступные статусы:
# - `basket` - корзина
# - `new` - новый
# - `confirmed` - подтвержден
# - `assembled` - собран
# - `sent` - отправлен
# - `delivered` - доставлен
# - `canceled` - отменен

### --- экспорт товаров ---
GET {{baseUrl}}/products/export/

### --- экспорт товаров с фильтрацией ---
POST {{baseUrl}}/products/export/filtered/
Content-Type: application/json

{
    "shop_id": 1,
    "category_id": 15
}

### --- экспорт товаров по нескольким магазинам ---
POST {{baseUrl}}/products/export/filtered/
Content-Type: application/json

{
    "shop_ids": [1, 2, 3],
    "category_id": 101
}

### --- экспорт товаров по нескольким категориям ---
POST {{baseUrl}}/products/export/filtered/
Content-Type: application/json

{
    "shop_id": 1,
    "category_ids": [101, 102, 103]
}

### --- экспорт товаров с параметрами ---
POST {{baseUrl}}/products/export/filtered/
Content-Type: application/json

{
    "shop_id": 1,
    "category_id": 224,
    "parameters": {
        "Цвет": "черный",
        "Диагональ (дюйм)": "6.1"
    }
}
