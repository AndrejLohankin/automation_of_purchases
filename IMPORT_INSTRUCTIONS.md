# Импорт данных магазина через админку

## Как использовать:

1. **Вход в админку:**
   - Перейдите по адресу: `http://127.0.0.1:8000/admin/`
   - Войдите под учетной записью администратора

2. **Доступ к импорту:**
   - В главном меню админки появится пункт "Импорт данных"
   - Нажмите на него, чтобы открыть форму импорта

3. **Загрузка файла:**
   - Нажмите "Выберите YAML-файл для импорта"
   - Выберите файл с данными магазина (должен иметь расширение .yaml)
   - Нажмите кнопку "Импортировать"

## Требования к файлу:

- Формат файла: YAML
- Расширение: .yaml
- Структура файла должна соответствовать формату:
```yaml

shop: Название магазина
categories:
  - id: №категории
    name: НазаниC5 категории
  - id: №категории
    name: Назание категории
goods:
  - id: №товара
    category: №категории
    model: Модель товара
    name: Название товара
    price: Цена
    price_rrc: Рекомендуемая цена
    quantity: Количество
    parameters:
      Название параметра: Значение
```

## Примеры файлов:

### shop1.yaml (Связной)
```yaml
shop: Связной
categories:
  - id: 224
    name: Смартфоны
  - id: 15
    name: Аксессуары
  - id: 1
    name: Flash-накопители
  - id: 5
    name: Телевизоры
goods:
  - id: 4216292
    category: 224
    model: apple/iphone/xs-max
    name: Смартфон Apple iPhone XS Max 512GB (золотистый)
    price: 110000
    price_rrc: 116990
    quantity: 14
    parameters:
      "Диагональ (дюйм)" : 6.5
      "Разрешение (пикс)" : 2688x1242
      "Встроенная память (Гб)" : 512
      "Цвет" : золотистый
```

### shop2.yaml (M.Video)
```yaml
shop: M.Video
categories:
  - id: 101
    name: Ноутбуки
  - id: 102
    name: Планшеты
  - id: 103
    name: Мониторы
  - id: 104
    name: Комплектующие
  - id: 105
    name: Игровые приставки
  - id: 106
    name: Фотоаппараты
  - id: 107
    name: Наушники
goods:
  - id: 1001
    category: 101
    model: dell/xps-13
    name: Ноутбук Dell XPS 13 (2022) i7/16GB/512GB
    price: 120000
    price_rrc: 125000
    quantity: 10
    parameters:
      "Диагональ экрана (дюйм)" : 13.4
      "Процессор" : Intel Core i7-1250U
      "Оперативная память (ГБ)" : 16
      "Объем SSD (ГБ)" : 512
      "Цвет" : серебристый
```

## Что происходит при импорте:

1. **Проверка файла:**
   - Проверяется расширение файла (.yaml)
   - Проверяется структура YAML
   - Проверяются обязательные поля

2. **Обработка данных:**
   - Создается или обновляется магазин
   - Обрабатываются категории
   - Обрабатываются товары
   - Обрабатываются параметры товаров

3. **Результат:**
   - Старые данные для магазина удаляются
   - Загружаются новые данные
   - Показывается сообщение об успешном импорте

## Ограничения:

- Один файл = один магазин
- Файл должен быть в кодировке UTF-8
- Максимальный размер файла ограничен настройками Django
- При ошибке импорта данные не сохраняются